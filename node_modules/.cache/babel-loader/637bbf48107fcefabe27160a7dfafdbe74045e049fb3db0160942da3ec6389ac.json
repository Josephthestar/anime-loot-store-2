{"ast":null,"code":"import { getToken } from './users-service';\nexport default async function sendRequest(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n  if (payload) {\n    options.headers = {\n      'Content-Type': 'application/json'\n    };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    options.headers ||= {};\n    options.headers.Authorization = `Bearer ${token}`;\n  }\n  const res = await fetch(url, options);\n  if (!res.ok) {\n    console.error('Error response:', res.status, res.statusText);\n    const responseBody = await res.text();\n    console.error('Response body:', responseBody);\n    throw new Error('Bad Request');\n  }\n  return res.json();\n}","map":{"version":3,"names":["getToken","sendRequest","url","method","payload","options","headers","body","JSON","stringify","token","Authorization","res","fetch","ok","console","error","status","statusText","responseBody","text","Error","json"],"sources":["/Users/josephrihan/Desktop/anime-lootsnack-store/src/utilities/send-request.js"],"sourcesContent":["import { getToken } from './users-service';\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method };\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    options.headers ||= {};\n    options.headers.Authorization = `Bearer ${token}`;\n  }\n  const res = await fetch(url, options);\n\n  if (!res.ok) {\n    console.error('Error response:', res.status, res.statusText);\n    const responseBody = await res.text();\n    console.error('Response body:', responseBody);\n    throw new Error('Bad Request');\n  }\n\n  return res.json();\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;AAE1C,eAAe,eAAeC,WAAW,CAACC,GAAG,EAAkC;EAAA,IAAhCC,MAAM,uEAAG,KAAK;EAAA,IAAEC,OAAO,uEAAG,IAAI;EAC3E,MAAMC,OAAO,GAAG;IAAEF;EAAO,CAAC;EAC1B,IAAIC,OAAO,EAAE;IACXC,OAAO,CAACC,OAAO,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACxDD,OAAO,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;EACxC;EACA,MAAMM,KAAK,GAAGV,QAAQ,EAAE;EACxB,IAAIU,KAAK,EAAE;IACTL,OAAO,CAACC,OAAO,KAAK,CAAC,CAAC;IACtBD,OAAO,CAACC,OAAO,CAACK,aAAa,GAAI,UAASD,KAAM,EAAC;EACnD;EACA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAG,EAAEG,OAAO,CAAC;EAErC,IAAI,CAACO,GAAG,CAACE,EAAE,EAAE;IACXC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEJ,GAAG,CAACK,MAAM,EAAEL,GAAG,CAACM,UAAU,CAAC;IAC5D,MAAMC,YAAY,GAAG,MAAMP,GAAG,CAACQ,IAAI,EAAE;IACrCL,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEG,YAAY,CAAC;IAC7C,MAAM,IAAIE,KAAK,CAAC,aAAa,CAAC;EAChC;EAEA,OAAOT,GAAG,CAACU,IAAI,EAAE;AACnB"},"metadata":{},"sourceType":"module","externalDependencies":[]}